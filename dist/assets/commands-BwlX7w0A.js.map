{"version":3,"file":"commands-BwlX7w0A.js","sources":["../../node_modules/molstar/lib/mol-plugin/command.js","../../node_modules/molstar/lib/mol-plugin/commands.js"],"sourcesContent":["/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { UUID } from '../mol-util/index.js';\nexport { PluginCommand, PluginCommandManager };\nfunction PluginCommand() {\n    const ret = ((ctx, params) => ctx.commands.dispatch(ret, params || {}));\n    ret.subscribe = (ctx, action) => ctx.commands.subscribe(ret, action);\n    ret.id = UUID.create22();\n    return ret;\n}\nclass PluginCommandManager {\n    constructor() {\n        this.subs = new Map();\n        this.disposing = false;\n    }\n    subscribe(cmd, action) {\n        let actions = this.subs.get(cmd.id);\n        if (!actions) {\n            actions = [];\n            this.subs.set(cmd.id, actions);\n        }\n        actions.push(action);\n        return {\n            unsubscribe: () => {\n                const actions = this.subs.get(cmd.id);\n                if (!actions)\n                    return;\n                const idx = actions.indexOf(action);\n                if (idx < 0)\n                    return;\n                for (let i = idx + 1; i < actions.length; i++) {\n                    actions[i - 1] = actions[i];\n                }\n                actions.pop();\n            }\n        };\n    }\n    /** Resolves after all actions have completed */\n    dispatch(cmd, params) {\n        return new Promise((resolve, reject) => {\n            if (this.disposing) {\n                reject('disposed');\n                return;\n            }\n            const actions = this.subs.get(cmd.id);\n            if (!actions) {\n                resolve();\n                return;\n            }\n            this.resolve({ cmd, params, resolve, reject });\n        });\n    }\n    dispose() {\n        this.subs.clear();\n    }\n    async resolve(instance) {\n        const actions = this.subs.get(instance.cmd.id);\n        if (!actions) {\n            instance.resolve();\n            return;\n        }\n        try {\n            // TODO: should actions be called \"asynchronously\" (\"setImmediate\") instead?\n            for (const a of actions) {\n                await a(instance.params);\n            }\n            instance.resolve();\n        }\n        catch (e) {\n            instance.reject(e);\n        }\n    }\n}\n","/**\n * Copyright (c) 2018-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Adam Midlik <midlik@gmail.com>\n */\nimport { PluginCommand } from './command.js';\nexport const PluginCommands = {\n    State: {\n        SetCurrentObject: PluginCommand(),\n        ApplyAction: PluginCommand(),\n        Update: PluginCommand(),\n        RemoveObject: PluginCommand(),\n        ToggleExpanded: PluginCommand(),\n        ToggleVisibility: PluginCommand(),\n        Snapshots: {\n            Add: PluginCommand(),\n            Replace: PluginCommand(),\n            Move: PluginCommand(),\n            Remove: PluginCommand(),\n            Apply: PluginCommand(),\n            Clear: PluginCommand(),\n            Upload: PluginCommand(),\n            Fetch: PluginCommand(),\n            DownloadToFile: PluginCommand(),\n            OpenFile: PluginCommand(),\n            OpenUrl: PluginCommand(),\n        }\n    },\n    Interactivity: {\n        Object: {\n            Highlight: PluginCommand(),\n        },\n        Structure: {\n            Highlight: PluginCommand(),\n            Select: PluginCommand()\n        },\n        ClearHighlights: PluginCommand(),\n    },\n    Layout: {\n        Update: PluginCommand()\n    },\n    Toast: {\n        Show: PluginCommand(),\n        Hide: PluginCommand()\n    },\n    Camera: {\n        Reset: PluginCommand(),\n        SetSnapshot: PluginCommand(),\n        Focus: PluginCommand(),\n        FocusObject: PluginCommand(),\n        OrientAxes: PluginCommand(),\n        ResetAxes: PluginCommand(),\n    },\n    Canvas3D: {\n        SetSettings: PluginCommand(),\n        ResetSettings: PluginCommand()\n    }\n};\n"],"names":["PluginCommand","ret","ctx","params","action","UUID","PluginCommandManager","cmd","actions","idx","i","resolve","reject","instance","a","e","PluginCommands"],"mappings":"6CAOA,SAASA,GAAgB,CACrB,MAAMC,EAAO,CAACC,EAAKC,IAAWD,EAAI,SAAS,SAASD,EAAKE,GAAU,CAAA,CAAE,EACrE,OAAAF,EAAI,UAAY,CAACC,EAAKE,IAAWF,EAAI,SAAS,UAAUD,EAAKG,CAAM,EACnEH,EAAI,GAAKI,EAAK,SAAQ,EACfJ,CACX,CACA,MAAMK,CAAqB,CACvB,aAAc,CACV,KAAK,KAAO,IAAI,IAChB,KAAK,UAAY,EACrB,CACA,UAAUC,EAAKH,EAAQ,CACnB,IAAII,EAAU,KAAK,KAAK,IAAID,EAAI,EAAE,EAClC,OAAKC,IACDA,EAAU,CAAA,EACV,KAAK,KAAK,IAAID,EAAI,GAAIC,CAAO,GAEjCA,EAAQ,KAAKJ,CAAM,EACZ,CACH,YAAa,IAAM,CACf,MAAMI,EAAU,KAAK,KAAK,IAAID,EAAI,EAAE,EACpC,GAAI,CAACC,EACD,OACJ,MAAMC,EAAMD,EAAQ,QAAQJ,CAAM,EAClC,GAAI,EAAAK,EAAM,GAEV,SAASC,EAAID,EAAM,EAAGC,EAAIF,EAAQ,OAAQE,IACtCF,EAAQE,EAAI,CAAC,EAAIF,EAAQE,CAAC,EAE9BF,EAAQ,IAAG,EACf,CACZ,CACI,CAEA,SAASD,EAAKJ,EAAQ,CAClB,OAAO,IAAI,QAAQ,CAACQ,EAASC,IAAW,CACpC,GAAI,KAAK,UAAW,CAChBA,EAAO,UAAU,EACjB,MACJ,CAEA,GAAI,CADY,KAAK,KAAK,IAAIL,EAAI,EAAE,EACtB,CACVI,EAAO,EACP,MACJ,CACA,KAAK,QAAQ,CAAE,IAAAJ,EAAK,OAAAJ,EAAQ,QAAAQ,EAAS,OAAAC,EAAQ,CACjD,CAAC,CACL,CACA,SAAU,CACN,KAAK,KAAK,MAAK,CACnB,CACA,MAAM,QAAQC,EAAU,CACpB,MAAML,EAAU,KAAK,KAAK,IAAIK,EAAS,IAAI,EAAE,EAC7C,GAAI,CAACL,EAAS,CACVK,EAAS,QAAO,EAChB,MACJ,CACA,GAAI,CAEA,UAAWC,KAAKN,EACZ,MAAMM,EAAED,EAAS,MAAM,EAE3BA,EAAS,QAAO,CACpB,OACOE,EAAG,CACNF,EAAS,OAAOE,CAAC,CACrB,CACJ,CACJ,CCnEY,MAACC,EAAiB,CAC1B,MAAO,CACH,iBAAkBhB,EAAa,EAC/B,YAAaA,EAAa,EAC1B,OAAQA,EAAa,EACrB,aAAcA,EAAa,EAC3B,eAAgBA,EAAa,EAC7B,iBAAkBA,EAAa,EAC/B,UAAW,CACP,IAAKA,EAAa,EAClB,QAASA,EAAa,EACtB,KAAMA,EAAa,EACnB,OAAQA,EAAa,EACrB,MAAOA,EAAa,EACpB,MAAOA,EAAa,EACpB,OAAQA,EAAa,EACrB,MAAOA,EAAa,EACpB,eAAgBA,EAAa,EAC7B,SAAUA,EAAa,EACvB,QAASA,EAAa,CAClC,CACA,EACI,cAAe,CACX,OAAQ,CACJ,UAAWA,EAAa,CACpC,EACQ,UAAW,CACP,UAAWA,EAAa,EACxB,OAAQA,EAAa,CACjC,EACQ,gBAAiBA,EAAa,CACtC,EACI,OAAQ,CACJ,OAAQA,EAAa,CAC7B,EACI,MAAO,CACH,KAAMA,EAAa,EACnB,KAAMA,EAAa,CAC3B,EACI,OAAQ,CACJ,MAAOA,EAAa,EACpB,YAAaA,EAAa,EAC1B,MAAOA,EAAa,EACpB,YAAaA,EAAa,EAC1B,WAAYA,EAAa,EACzB,UAAWA,EAAa,CAChC,EACI,SAAU,CACN,YAAaA,EAAa,EAC1B,cAAeA,EAAa,CACpC,CACA","x_google_ignoreList":[0,1]}